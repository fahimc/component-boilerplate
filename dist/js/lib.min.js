"use strict";var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function");e=e||this;for(var n=0,o=this.length;n!==o;++n)t.call(e,this[n],n,this)}),NodeList.prototype.forEach=Array.prototype.forEach,window.MutationObserver=window.MutationObserver||function(t){function e(t){this.i=[],this.m=t}function n(e){var n,o={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(n in e)o[n]!==t&&e[n]!==t&&(o[n]=e[n]);return o}function o(e,o,i,r){for(var a,u,c={},l=o.attributes,h=l.length;h--;)u=(a=l[h]).name,r&&r[u]===t||(s(o,a)!==i[u]&&e.push(n({type:"attributes",target:o,attributeName:u,oldValue:i[u],attributeNamespace:a.namespaceURI})),c[u]=!0);for(u in i)c[u]||e.push(n({target:o,type:"attributes",attributeName:u,oldValue:i[u]}))}function i(t,e){var n=!0;return function t(o){var i={node:o};return!e.a||3!==o.nodeType&&8!==o.nodeType?(e.b&&n&&1===o.nodeType&&(i.b=a(o.attributes,function(t,n){return e.f&&!e.f[n.name]||(t[n.name]=s(o,n)),t})),n&&(e.c||e.a||e.b&&e.g)&&(i.c=function(t,e){for(var n=[],o=0;o<t.length;o++)n[o]=e(t[o],o,t);return n}(o.childNodes,t)),n=e.g):i.a=o.nodeValue,i}(t)}function r(t){try{return t.id||(t.mo_id=t.mo_id||l++)}catch(e){try{return t.nodeValue}catch(t){return l++}}}function a(t,e){for(var n={},o=0;o<t.length;o++)n=e(n,t[o],o,t);return n}function u(t,e,n,o){for(;n<t.length;n++)if((o?t[n][o]:t[n])===e)return n;return-1}e._period=30,e.prototype={observe:function(c,s){for(var l={b:!!(s.attributes||s.attributeFilter||s.attributeOldValue),c:!!s.childList,g:!!s.subtree,a:!(!s.characterData&&!s.characterDataOldValue)},h=this.i,f=0;f<h.length;f++)h[f].s===c&&h.splice(f,1);var d,p,T,y;s.attributeFilter&&(l.f=a(s.attributeFilter,function(t,e){return t[e]=!0,t})),h.push({s:c,o:(p=c,T=l,y=i(p,T),function(e){var a,c=e.length;T.a&&3===p.nodeType&&p.nodeValue!==y.a&&e.push(new n({type:"characterData",target:p,oldValue:y.a})),T.b&&y.b&&o(e,p,y.b,T.f),(T.c||T.g)&&(a=function(e,i,a,c){function s(t,i,r,a,u){var s,h,f,d=t.length-1;for(u=-~((d-u)/2);f=t.pop();)s=r[f.j],h=a[f.l],c.c&&u&&Math.abs(f.j-f.l)>=d&&(e.push(n({type:"childList",target:i,addedNodes:[s],removedNodes:[s],nextSibling:s.nextSibling,previousSibling:s.previousSibling})),u--),c.b&&h.b&&o(e,s,h.b,c.f),c.a&&3===s.nodeType&&s.nodeValue!==h.a&&e.push(n({type:"characterData",target:s,oldValue:h.a})),c.g&&l(s,h)}function l(i,a){for(var f,d,p,T,y,v=i.childNodes,b=a.c,m=v.length,C=b?b.length:0,g=0,E=0,S=0;E<m||S<C;)(T=v[E])===(y=(p=b[S])&&p.node)?(c.b&&p.b&&o(e,T,p.b,c.f),c.a&&p.a!==t&&T.nodeValue!==p.a&&e.push(n({type:"characterData",target:T,oldValue:p.a})),d&&s(d,i,v,b,g),c.g&&(T.childNodes.length||p.c&&p.c.length)&&l(T,p),E++,S++):(h=!0,f||(f={},d=[]),T&&(f[p=r(T)]||(f[p]=!0,-1===(p=u(b,T,S,"node"))?c.c&&(e.push(n({type:"childList",target:i,addedNodes:[T],nextSibling:T.nextSibling,previousSibling:T.previousSibling})),g++):d.push({j:E,l:p})),E++),y&&y!==v[E]&&(f[p=r(y)]||(f[p]=!0,-1===(p=u(v,y,E))?c.c&&(e.push(n({type:"childList",target:a.node,removedNodes:[y],nextSibling:b[S+1],previousSibling:b[S-1]})),g--):d.push({j:p,l:S})),S++));d&&s(d,i,v,b,g)}var h;return l(p,y),h}(e,0,0,T)),(a||e.length!==c)&&(y=i(p,T))})}),this.h||(d=this,function t(){var n=d.takeRecords();n.length&&d.m(n,d),d.h=setTimeout(t,e._period)}())},takeRecords:function(){for(var t=[],e=this.i,n=0;n<e.length;n++)e[n].o(t);return t},disconnect:function(){this.i=[],clearTimeout(this.h),this.h=null}};var c=document.createElement("i");c.style.top=0;var s=(c="null"!=c.attributes.style.value)?function(t,e){return e.value}:function(t,e){return"style"!==e.name?e.value:t.style.cssText},l=1;return e}(void 0);var ComponentManager={componentCollection:{},instanceCollection:[],init:function(){document.addEventListener("DOMContentLoaded",this.onLoad.bind(this))},onLoad:function(){this.generateComponents(),this.observe()},generateComponents:function(){for(var t in this.componentCollection){var e=this.componentCollection[t].obj,n=this.componentCollection[t].template;this.createAllInstance(e,n)}},observe:function(){var t=this;new MutationObserver(function(e){e.forEach(function(e){e.removedNodes.length&&e.removedNodes.forEach(function(t){t.component&&t.component.unmounted()}),e.addedNodes.length&&e.addedNodes.forEach(function(e){var n=e.getAttribute(""+Component.CONST.COMPONENT_ATTRIBUTE);if(n){var o=t.componentCollection[n].obj,i=t.componentCollection[n].template;t.createInstance(e,o,i)}})})}).observe(document.body,{childList:!0})},createAllInstance:function(t,e){var n=this;document.querySelectorAll("["+Component.CONST.COMPONENT_ATTRIBUTE+'="'+t.name+'"]').forEach(function(o){n.createInstance(o,t,e)})},createInstance:function(t,e,n){var o=document.querySelector("["+Component.CONST.COMPONENT_ATTRIBUTE+'="'+e.name+'"]['+Component.CONST.TEMPLATE_ATTRIBUTE+"]")||n,i=new ComponentInstance(t,e.data,e.methods);t.component=i,o&&(t.innerHTML="string"==typeof o?o:o.innerHTML),i.mounted(),i.updated()}},Component=function t(e,n){_classCallCheck(this,t),ComponentManager.componentCollection[e.name]={obj:e,template:n}};Component.CONST={COMPONENT_ATTRIBUTE:"data-component",TEMPLATE_ATTRIBUTE:"data-template"};var ComponentInstance=function(){function t(e,n,o){var i=this;if(_classCallCheck(this,t),this.element=e,n){var r=function(t){Object.defineProperty(i,t,{get:function(){return this["_"+t]},set:function(e){this["_"+t]=e,this.updated()}}),i[t]=n[t]};for(var a in n)r(a)}if(o)for(var a in o)this[a]=o[a]}return _createClass(t,[{key:"mounted",value:function(){}},{key:"unmounted",value:function(){}},{key:"updated",value:function(){}}]),t}();ComponentManager.init();_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if("function"!=typeof t)throw new TypeError(t+" is not a function");e=e||this;for(var n=0,o=this.length;n!==o;++n)t.call(e,this[n],n,this)}),NodeList.prototype.forEach=Array.prototype.forEach;var Router=function(){function t(e,n){if(_classCallCheck(this,t),!e.hasAttribute(t.CONST.ROUTER_ATTRIBUTE))throw"router element requires "+t.CONST.ROUTER_ATTRIBUTE+" attribute";this.router=e,this.transitionStyle=n||"visibility 0s, opacity 0.5s linear",this.sectionCollection=[],this.currentSection=null,this.setSections(),this.routeTo(this.getCurrentHash()),window.addEventListener("hashchange",this.onHashChange.bind(this),!1)}return _createClass(t,[{key:"setSections",value:function(){var e=this;this.sectionCollection=this.router.querySelectorAll("["+t.CONST.SECTION_ROUTE_ATTRIBUTE+"]"),this.sectionCollection.forEach(function(t){e.hideSection(t)})}},{key:"hideSection",value:function(t){t.style.position="absolute",t.style.visibility="hidden",t.style.opacity="0",t.style.transition=this.transitionStyle}},{key:"showSection",value:function(t){this.currentSection&&this.hideSection(this.currentSection),this.currentSection=t,t.style.visibility="visible",t.style.opacity="1"}},{key:"getCurrentHash",value:function(){return window.location.hash||"#/"}},{key:"routeTo",value:function(e,n){var o=e.replace("#",""),i=this.router.querySelector("["+t.CONST.SECTION_ROUTE_ATTRIBUTE+'="'+o+'"]');i?(this.showSection(i),n||history.pushState(null,null,e)):((i=this.router.querySelector("["+t.CONST.SECTION_ROUTE_ATTRIBUTE+'="/"]'))&&this.showSection(i),n||history.pushState(null,null,"#/"))}},{key:"onHashChange",value:function(){this.routeTo(this.getCurrentHash(),!0)}}]),t}();Router.CONST={ROUTER_ATTRIBUTE:"data-router",SECTION_ROUTE_ATTRIBUTE:"data-route"};